<!DOCTYPE html>
<html>
<head>
  <title>🧠 Speaker Training UI</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="header">
    <h1>🧠 Speaker Training UI</h1>
  </div>

  <div class="layout">
    <div class="main-column">

      <h2>🎯 Meeting Mode</h2>
      <button id="start-meeting" onclick="startMeeting()" disabled>🟢 Start Meeting Mode</button>
      <button id="stop-meeting" onclick="stopMeeting()" disabled>⏹️ Stop Meeting</button>
      <div id="meeting-status">Status: Idle</div>
      <div id="speaker-label">Current speaker: —</div>
      <div id="timeline"><em>Listening...</em></div>

      <h2>📁 Saved Meetings</h2>
      <div id="meeting-list"><em>Loading...</em></div>


      <h2>🧑‍💼 Enroll Speaker</h2>
      <input type="text" id="speaker-id" placeholder="Enter speaker ID" />
      <button onclick="recordAndEnroll()">🎙️ Enroll</button>

      <h2>🔍 Identify Speaker</h2>
      <button onclick="recordAndIdentify()">🎧 Record & Identify</button>
      <div id="identify-result">Status: Idle</div>
      <canvas id="identify-visualizer" width="400" height="80" style="display:none;"></canvas>

      <h2>📋 Enrolled Speakers</h2>
      <button onclick="fetchRecordings()">🔄 Refresh</button>
      <div id="recording-list"><p>Loading...</p></div>

      <div style="margin-top: 2rem;">
        <button onclick="window.location.href='/api/export?type=pt'">💾 Export .pt</button>
        <button onclick="window.location.href='/api/export?type=json'">📄 Export JSON</button>
      </div>
    </div>
  </div>

  <script src="/static/script.js"></script>
</body>
</html>
