<!DOCTYPE html>
<html>
<head>
  <title>Speaker Detector</title>
  <link rel="stylesheet" href="static/style.css">
</head>
<body>

  <div class="header">
    <h1>🎤 Speaker Detector</h1>
    <h3>Open source software to record, transcribe, and manage speaker data</h3>
  </div>

  <div class="workflow-accordion">
    <div class="accordion-step active" data-tab="step-1">1️⃣ Mic Test</div>
    <div class="accordion-step" data-tab="step-2">2️⃣ Enroll Speaker</div>
    <div class="accordion-step" data-tab="step-3">3️⃣ Identify Speaker</div>
    <div class="accordion-step" data-tab="step-4">4️⃣ Combine & Export</div>
    <div class="accordion-step" data-tab="step-5">5️⃣ Meetings</div>
    <div class="accordion-step" data-tab="step-6">6️⃣ Recordings</div>
  </div>

  <div id="step-1" class="accordion-content active">
    <h3>Mic Test</h3>
    <canvas class="visualizer" id="visualizer-step-1"></canvas>
    <div id="identify-result">Awaiting action...</div>
    <p id="mic-test-status">Pending</p>
    <button id="action-btn">▶️ Start Mic Test</button>
  </div>

  <div id="step-2" class="accordion-content">
    <h3>Enroll Speaker</h3>
    <input type="text" id="speaker-id" placeholder="Enter speaker ID">
    <button id="enroll-speaker-btn">➕ Enroll Speaker</button>
    <p class="status" id="enroll-speaker-status">Pending</p>
    <ul id="speakers-list"><li><em>Loading...</em></li></ul>
  </div>

  <div id="step-3" class="accordion-content">
  <h3>Identify Speaker</h3>
  <button id="identify-speaker-btn">🔍 Identify Speaker</button>
  <canvas class="visualizer" id="visualizer-step-3"></canvas>
  <div id="identify-result-step-3">Awaiting action...</div> <!-- ✅ Added result display -->
</div>


  <div id="step-4" class="accordion-content">
  <h3>📤 Export Speakers JSON (Auto Combines)</h3>
  <button id="export-speakers-json-btn">📥 Export Speakers JSON</button>
  <p class="status" id="export-speakers-json-status">Pending</p>

  <h3>📦 Exports</h3>
  <ul id="exports-list">
    <li><em>No exports yet.</em></li>
  </ul>

  <div class="export-instructions">
    <h4>📥 What to do with your speakers.json?</h4>
    <ul>
      <li>Use it in your React app or browser app that supports speaker identification.</li>
      <li>Place it in your app's <code>public/</code> or static folder.</li>
      <li>Ensure your frontend fetches it from the correct path (e.g., <code>/speakers.json</code>).</li>
      <li>Re-export anytime you add or update speakers.</li>
    </ul>
    <p><strong>Tip:</strong> This step automatically combines all enrolled speakers and exports the ready-to-use JSON for your frontend.</p>
  </div>
</div>


  <div id="step-5" class="accordion-content">
  <h3>🎙️ Meeting Mode</h3>
  <p>Record meetings or conversations. Automatically saves chunks and allows transcription and speaker labeling.</p>

  <div class="workflow-step">
    <button id="start-meeting">▶️ Start Meeting</button>
    <button id="stop-meeting" disabled>⏹️ Stop Meeting</button>
    <p id="meeting-status">Status: idle</p>
    <p id="speaker-label">Current speaker: —</p>
  </div>

  <div id="timeline"><em>Meeting timeline and summaries will appear here.</em></div>

  <h4>📋 Saved Meetings</h4>
  <div id="meeting-list">
    <em>No meetings saved yet.</em>
  </div>
  </div>


  <div id="step-6" class="accordion-content">
    <h3>Recordings</h3>
    <ul id="recordings-list"><li><em>Loading...</em></li></ul>
  </div>

  <script src="static/script.js"></script>
</body>
</html>
